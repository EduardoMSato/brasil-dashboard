import{a as f}from"./chunk-SSB3OILK.js";import{$ as c,F as l,ea as d,p as a}from"./chunk-IM6AJEZM.js";var E=(()=>{class n{constructor(t){this.http=t,this.baseUrl="https://brasilapi.com.br/api/cnpj/v1"}getCnpjData(t){let e=t.replace(/\D/g,"");return e.length!==14?a(()=>new Error("CNPJ deve conter exatamente 14 d\xEDgitos")):this.isValidCnpj(e)?this.http.get(`${this.baseUrl}/${e}`).pipe(l(this.handleError)):a(()=>new Error("CNPJ inv\xE1lido"))}isValidCnpj(t){if(t.length!==14||/^(\d)\1+$/.test(t))return!1;let e=0,r=2;for(let i=11;i>=0;i--)e+=parseInt(t.charAt(i))*r,r=r===9?2:r+1;let s=e%11,u=s<2?0:11-s;if(parseInt(t.charAt(12))!==u)return!1;e=0,r=2;for(let i=12;i>=0;i--)e+=parseInt(t.charAt(i))*r,r=r===9?2:r+1;let o=e%11,p=o<2?0:11-o;return parseInt(t.charAt(13))===p}formatCnpj(t){return t.replace(/\D/g,"").replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5")}handleError(t){let e="Erro inesperado ao buscar CNPJ";return t.status===404?e="CNPJ n\xE3o encontrado":t.status===400?e="CNPJ inv\xE1lido":t.status===429?e="Muitas consultas. Aguarde um momento e tente novamente.":t.status===0?e="Erro de conex\xE3o. Verifique sua internet.":t.status>=500&&(e="Erro do servidor. Tente novamente mais tarde."),a(()=>new Error(e))}static{this.\u0275fac=function(e){return new(e||n)(d(f))}}static{this.\u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{E as a};
