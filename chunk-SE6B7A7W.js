import{a as $}from"./chunk-52M3FZJC.js";import{b as Y}from"./chunk-HHNYTWEP.js";import{c as J}from"./chunk-4ZQZ7YWU.js";import{a as W}from"./chunk-346WXAVH.js";import{c as G}from"./chunk-SK6Y6RBW.js";import{q as H,r as K}from"./chunk-4CMTLZL2.js";import"./chunk-VLEIJVIC.js";import{a as F,b as I,c as B,e as A,f as z,g as L,h as N,i as q}from"./chunk-MAT4ZJCR.js";import{ca as U,ea as V,fa as R,ga as j}from"./chunk-SSB3OILK.js";import"./chunk-EJJBCPAK.js";import{$b as O,Ac as w,B as P,Cb as f,Fb as x,Fc as k,Gc as D,Hb as s,Pb as i,Qb as _,Rb as h,U as y,V as v,Va as c,Vb as E,Wa as C,Zb as M,ka as T,lb as u,nb as d,sa as g,ta as p,wb as o,xb as a,yb as b,zc as S}from"./chunk-IM6AJEZM.js";function Q(r,m){r&1&&(o(0,"div",8),b(1,"mat-progress-spinner",9),o(2,"p"),i(3,"Carregando taxas financeiras..."),a(),o(4,"small"),i(5,"Obtendo dados mais recentes do mercado"),a()())}function X(r,m){if(r&1){let t=f();o(0,"div",10)(1,"mat-card",11)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon",12),i(5,"error"),a(),i(6," Erro ao Carregar Taxas "),a()(),o(7,"mat-card-content")(8,"p"),i(9),a()(),o(10,"mat-card-actions")(11,"button",13),x("click",function(){g(t);let n=s();return p(n.loadTaxas())}),o(12,"mat-icon"),i(13,"refresh"),a(),i(14," Tentar Novamente "),a()()()()}if(r&2){let t=s();c(9),_(t.error)}}function Z(r,m){if(r&1&&(o(0,"span",24),i(1),a()),r&2){let t=s().$implicit,e=s(2);c(),_(e.getTaxaUnit(t.nome))}}function tt(r,m){if(r&1&&(o(0,"mat-card",16)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon",17),i(4,"trending_up"),a(),i(5),a()(),o(6,"mat-card-content")(7,"div",18)(8,"span",19),i(9),a(),u(10,Z,2,1,"span",20),a(),o(11,"div",21)(12,"div",22)(13,"mat-icon"),i(14,"update"),a(),o(15,"span"),i(16),M(17,"date"),a()()()(),o(18,"mat-card-actions")(19,"button",23)(20,"mat-icon"),i(21,"info"),a(),i(22," Detalhes "),a()()()),r&2){let t=m.$implicit,e=s(2);c(5),h(" ",t.nome," "),c(4),_(e.formatTaxaValue(t.valor)),c(),d("ngIf",e.getTaxaUnit(t.nome)),c(6),h("\xDAltima atualiza\xE7\xE3o: ",O(17,4,e.lastUpdated,"dd/MM/yyyy HH:mm"),"")}}function et(r,m){if(r&1&&(o(0,"div",14),u(1,tt,23,7,"mat-card",15),a()),r&2){let t=s();c(),d("ngForOf",t.taxas)("ngForTrackBy",t.trackByTaxa)}}function nt(r,m){if(r&1){let t=f();o(0,"div",25)(1,"mat-card",26)(2,"mat-card-content")(3,"mat-icon",27),i(4,"info"),a(),o(5,"h3"),i(6,"Nenhuma Taxa Dispon\xEDvel"),a(),o(7,"p"),i(8,"N\xE3o h\xE1 taxas financeiras dispon\xEDveis no momento."),a(),o(9,"button",13),x("click",function(){g(t);let n=s();return p(n.loadTaxas())}),o(10,"mat-icon"),i(11,"refresh"),a(),i(12," Recarregar "),a()()()()}}function at(r,m){if(r&1){let t=f();o(0,"div",28)(1,"mat-card",29)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),i(5,"settings"),a(),i(6," A\xE7\xF5es R\xE1pidas "),a()(),o(7,"mat-card-content")(8,"div",30)(9,"button",31),x("click",function(){g(t);let n=s();return p(n.loadTaxas())}),o(10,"mat-icon"),i(11,"refresh"),a(),i(12," Atualizar Taxas "),a(),o(13,"button",31),x("click",function(){g(t);let n=s();return p(n.exportTaxas())}),o(14,"mat-icon"),i(15,"file_download"),a(),i(16," Exportar Dados "),a(),o(17,"button",31),x("click",function(){g(t);let n=s();return p(n.showHistory())}),o(18,"mat-icon"),i(19,"history"),a(),i(20," Hist\xF3rico "),a()()()()()}if(r&2){let t=s();c(9),d("disabled",t.isLoading),c(4),d("disabled",t.taxas.length===0),c(4),d("disabled",t.taxas.length===0)}}function it(r,m){if(r&1&&(o(0,"div",32)(1,"mat-card",33)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),i(5,"info"),a(),i(6," Informa\xE7\xF5es do Sistema "),a()(),o(7,"mat-card-content")(8,"div",34)(9,"div",22)(10,"strong"),i(11,"Total de Taxas:"),a(),o(12,"span"),i(13),a()(),o(14,"div",22)(15,"strong"),i(16,"Fonte:"),a(),o(17,"span"),i(18,"Brasil API"),a()(),o(19,"div",22)(20,"strong"),i(21,"\xDAltima Atualiza\xE7\xE3o:"),a(),o(22,"span"),i(23),M(24,"date"),a()(),o(25,"div",22)(26,"strong"),i(27,"Status:"),a(),o(28,"span",35),i(29,"Operacional"),a()()()()()()),r&2){let t=s();c(13),_(t.taxas.length),c(10),_(O(24,2,t.lastUpdated,"dd/MM/yyyy HH:mm:ss"))}}var Tt=(()=>{class r{constructor(t,e){this.taxasService=t,this.snackBar=e,this.taxas=[],this.mainTaxas=[],this.otherTaxas=[],this.isLoading=!1,this.error="",this.lastUpdated=null,this.autoRefresh=!1,this.mainIndicators=[{key:"selic",name:"SELIC",icon:"trending_up",color:"#2196F3",description:"Taxa b\xE1sica de juros da economia"},{key:"cdi",name:"CDI",icon:"account_balance",color:"#4CAF50",description:"Certificado de Dep\xF3sito Interbanc\xE1rio"},{key:"ipca",name:"IPCA",icon:"assessment",color:"#FF9800",description:"\xCDndice de Pre\xE7os ao Consumidor Amplo"},{key:"dolar",name:"USD",icon:"attach_money",color:"#F44336",description:"D\xF3lar Americano"},{key:"euro",name:"EUR",icon:"euro_symbol",color:"#9C27B0",description:"Euro"}]}ngOnInit(){this.loadTaxas()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}loadTaxas(){this.isLoading=!0,this.error="",this.taxasService.getTaxas().subscribe({next:t=>{this.taxas=t,this.processTaxas(),this.isLoading=!1,this.lastUpdated=new Date,this.snackBar.open(`${t.length} taxas carregadas com sucesso!`,"Fechar",{duration:3e3})},error:t=>{this.error=t.message,this.isLoading=!1,this.snackBar.open(t.message,"Fechar",{duration:4e3})}})}processTaxas(){this.mainTaxas=[];let t=new Set;this.mainIndicators.forEach(e=>{let n=this.findTaxaByKey(e.key);n&&(this.mainTaxas.push({name:n.nome,displayName:e.name,value:n.valor,icon:e.icon,type:this.getTaxaType(n.nome),color:e.color,description:e.description}),t.add(n.nome))}),this.otherTaxas=this.taxas.filter(e=>!t.has(e.nome))}findTaxaByKey(t){return this.taxas.find(e=>e.nome.toLowerCase().includes(t.toLowerCase()))}getTaxaType(t){return["dolar","euro","peso","libra","iene","usd","eur"].some(n=>t.toLowerCase().includes(n))?"currency":"percentage"}formatTaxaValue(t){return typeof t!="number"?"N/A":Math.abs(t)<1?`${(t*100).toFixed(4)}%`:t>1?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:4}).format(t):`${t.toFixed(4)}%`}getTaxaUnit(t){if(!t)return"";let e=t.toLowerCase();return e.includes("dolar")||e.includes("euro")||e.includes("usd")||e.includes("eur")?"":e.includes("taxa")||e.includes("juros")||e.includes("selic")||e.includes("cdi")?"% a.a.":""}trackByTaxa(t,e){return e.nome}exportTaxas(){this.exportToCsv()}showHistory(){this.snackBar.open("Funcionalidade de hist\xF3rico em desenvolvimento","Fechar",{duration:3e3})}getTrendIcon(t){return t>10?"trending_up":t>0?"trending_flat":"trending_down"}getTrendColor(t,e){return e==="currency"?t>5?"#F44336":t>3?"#FF9800":"#4CAF50":t>15?"#F44336":t>5?"#FF9800":"#4CAF50"}toggleAutoRefresh(){this.autoRefresh=!this.autoRefresh,this.autoRefresh?(this.refreshSubscription=P(5*60*1e3).pipe(y(0),v(()=>this.taxasService.getTaxas())).subscribe({next:t=>{this.taxas=t,this.processTaxas(),this.lastUpdated=new Date},error:t=>{this.snackBar.open("Erro na atualiza\xE7\xE3o autom\xE1tica: "+t.message,"Fechar",{duration:3e3})}}),this.snackBar.open("Atualiza\xE7\xE3o autom\xE1tica ativada (a cada 5 minutos)","Fechar",{duration:3e3})):(this.refreshSubscription&&this.refreshSubscription.unsubscribe(),this.snackBar.open("Atualiza\xE7\xE3o autom\xE1tica desativada","Fechar",{duration:2e3}))}refresh(){this.loadTaxas()}exportToCsv(){if(this.taxas.length===0){this.snackBar.open("Nenhuma taxa para exportar","Fechar",{duration:2e3});return}let t=this.convertToCsv(),e=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");if(n.download!==void 0){let l=URL.createObjectURL(e);n.setAttribute("href",l),n.setAttribute("download",`taxas-brasil-${new Date().toISOString().split("T")[0]}.csv`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),this.snackBar.open("Taxas exportadas com sucesso!","Fechar",{duration:3e3})}}convertToCsv(){let e=[["Nome","Valor","Tipo","Data de Atualiza\xE7\xE3o"]];return this.taxas.forEach(n=>{e.push([n.nome,n.valor.toString(),this.getTaxaType(n.nome),this.lastUpdated?.toLocaleString("pt-BR")||""])}),e.map(n=>n.map(l=>`"${l.toString().replace(/"/g,'""')}"`).join(",")).join(`
`)}getLastUpdateText(){if(!this.lastUpdated)return"";let e=new Date().getTime()-this.lastUpdated.getTime(),n=Math.floor(e/(1e3*60));if(n<1)return"Atualizado agora";if(n===1)return"Atualizado h\xE1 1 minuto";if(n<60)return`Atualizado h\xE1 ${n} minutos`;let l=Math.floor(n/60);return l===1?"Atualizado h\xE1 1 hora":l<24?`Atualizado h\xE1 ${l} horas`:this.lastUpdated.toLocaleDateString("pt-BR")}retry(){this.loadTaxas()}static{this.\u0275fac=function(e){return new(e||r)(C($),C(H))}}static{this.\u0275cmp=T({type:r,selectors:[["app-taxas-dashboard"]],standalone:!0,features:[E],decls:12,vars:6,consts:[[1,"taxas-dashboard-container"],[1,"header-section"],["class","loading-section",4,"ngIf"],["class","error-section",4,"ngIf"],["class","taxas-grid",4,"ngIf"],["class","empty-section",4,"ngIf"],["class","quick-actions",4,"ngIf"],["class","system-info",4,"ngIf"],[1,"loading-section"],["mode","indeterminate","diameter","50"],[1,"error-section"],[1,"error-card"],[1,"error-icon"],["mat-raised-button","","color","primary",3,"click"],[1,"taxas-grid"],["class","taxa-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"taxa-card"],[1,"taxa-icon"],[1,"taxa-value"],[1,"value"],["class","unit",4,"ngIf"],[1,"taxa-info"],[1,"info-item"],["mat-button",""],[1,"unit"],[1,"empty-section"],[1,"empty-card"],[1,"empty-icon"],[1,"quick-actions"],[1,"actions-card"],[1,"actions-grid"],["mat-stroked-button","",3,"click","disabled"],[1,"system-info"],[1,"info-card"],[1,"info-grid"],[1,"status-operational"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),i(3,"\u{1F4B0} Dashboard de Taxas Financeiras"),a(),o(4,"p"),i(5,"Acompanhe as principais taxas e indicadores financeiros do Brasil"),a()(),u(6,Q,6,0,"div",2)(7,X,15,1,"div",3)(8,et,2,2,"div",4)(9,nt,13,0,"div",5)(10,at,21,3,"div",6)(11,it,30,5,"div",7),a()),e&2&&(c(6),d("ngIf",n.isLoading),c(),d("ngIf",n.error&&!n.isLoading),c(),d("ngIf",n.taxas.length>0&&!n.isLoading),c(),d("ngIf",n.taxas.length===0&&!n.isLoading&&!n.error),c(),d("ngIf",!n.isLoading),c(),d("ngIf",n.taxas.length>0))},dependencies:[D,S,w,k,L,F,A,B,z,I,V,U,q,N,K,j,R,W,G,J,Y],styles:[".taxas-dashboard-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#003d7a;font-size:2.2rem;margin:0 0 .5rem;font-weight:600}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1rem;margin:0}.loading-section[_ngcontent-%COMP%]{text-align:center;padding:3rem}.loading-section[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin:0 auto 1rem}.loading-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1rem;margin:0 0 .5rem}.loading-section[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-style:italic}.error-section[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:2rem}.error-section[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]{max-width:500px;width:100%}.error-section[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{color:#e74c3c;margin-right:.5rem}.error-section[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;color:#e74c3c}.taxas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;margin-bottom:2rem}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]{transition:all .3s ease;border-radius:12px;overflow:hidden}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #00000026}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#003d7a,#1565c0);color:#fff}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .taxa-icon[_ngcontent-%COMP%]{color:#fff;margin-right:.5rem}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;color:#fff;font-size:1.1rem}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.5rem}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .taxa-value[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.5rem;margin-bottom:1rem}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .taxa-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#003d7a}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .taxa-value[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:.9rem;color:#666;font-weight:500}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .taxa-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#666;font-size:.875rem}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .taxa-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem}.taxas-grid[_ngcontent-%COMP%]   .taxa-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding:.5rem 1.5rem 1.5rem}.empty-section[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:2rem}.empty-section[_ngcontent-%COMP%]   .empty-card[_ngcontent-%COMP%]{max-width:500px;width:100%;text-align:center;padding:2rem}.empty-section[_ngcontent-%COMP%]   .empty-card[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#ccc;margin-bottom:1rem}.empty-section[_ngcontent-%COMP%]   .empty-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#003d7a;margin-bottom:1rem}.empty-section[_ngcontent-%COMP%]   .empty-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:2rem}.quick-actions[_ngcontent-%COMP%]{margin-bottom:2rem}.quick-actions[_ngcontent-%COMP%]   .actions-card[_ngcontent-%COMP%]{border-radius:12px}.quick-actions[_ngcontent-%COMP%]   .actions-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;color:#003d7a}.quick-actions[_ngcontent-%COMP%]   .actions-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.quick-actions[_ngcontent-%COMP%]   .actions-card[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem}.quick-actions[_ngcontent-%COMP%]   .actions-card[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1rem}.system-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{border-radius:12px}.system-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;color:#003d7a}.system-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.system-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.system-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.system-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#003d7a;font-size:.875rem;font-weight:600}.system-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-size:1rem}.system-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span.status-operational[_ngcontent-%COMP%]{color:#27ae60;font-weight:600}@media (max-width: 768px){.taxas-dashboard-container[_ngcontent-%COMP%]{padding:15px}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.taxas-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.quick-actions[_ngcontent-%COMP%]   .actions-card[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%], .system-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 480px){.taxas-dashboard-container[_ngcontent-%COMP%]{padding:10px}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.6rem}.taxa-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .taxa-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem}}"]})}}return r})();export{Tt as TaxasDashboardComponent};
