import{a as G}from"./chunk-3NERZ3VY.js";import{a as it,b as ot}from"./chunk-4HZ4BWUB.js";import{a as ct}from"./chunk-346WXAVH.js";import{a as Z,b as tt,c as et,f as nt,q as rt,r as at}from"./chunk-4CMTLZL2.js";import{b as q,c as y,e as J,f as R,i as K,k as Q,l as U,m as W,n as X,o as Y}from"./chunk-VLEIJVIC.js";import{a as F,b as H,c as k,d as w,e as B,f as T,g as L,h as A,i as j}from"./chunk-MAT4ZJCR.js";import{ca as N,ea as V,fa as z,ga as $}from"./chunk-SSB3OILK.js";import"./chunk-EJJBCPAK.js";import{Ac as I,Cb as P,Fb as g,Gc as D,Hb as d,Pb as i,Qb as h,Rb as C,Sb as O,Tb as v,Va as c,Vb as E,Wa as u,ka as x,lb as p,nb as s,sa as f,ta as M,wb as n,xb as e,yb as S,zc as b}from"./chunk-IM6AJEZM.js";function st(o,l){o&1&&(n(0,"mat-error"),i(1," CEP \xE9 obrigat\xF3rio "),e())}function lt(o,l){o&1&&(n(0,"mat-error"),i(1," CEP deve ter o formato 00000-000 "),e())}function mt(o,l){o&1&&(n(0,"mat-icon"),i(1,"refresh"),e())}function dt(o,l){o&1&&(n(0,"mat-icon"),i(1,"search"),e())}function pt(o,l){o&1&&(n(0,"div",14),S(1,"mat-progress-spinner",15),n(2,"p"),i(3,"Consultando CEP na Brasil API..."),e()())}function gt(o,l){if(o&1&&(n(0,"div",19)(1,"mat-icon"),i(2,"my_location"),e(),n(3,"div")(4,"strong"),i(5,"Coordenadas:"),e(),n(6,"span"),i(7),e()()()),o&2){let t=d(2);c(7),O("",t.cepData.location==null||t.cepData.location.coordinates==null?null:t.cepData.location.coordinates.latitude,", ",t.cepData.location==null||t.cepData.location.coordinates==null?null:t.cepData.location.coordinates.longitude,"")}}function _t(o,l){if(o&1&&(n(0,"mat-card",16)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon",17),i(4,"check_circle"),e(),i(5," Endere\xE7o Encontrado "),e(),n(6,"mat-card-subtitle"),i(7),e()(),n(8,"mat-card-content")(9,"div",18)(10,"div",19)(11,"mat-icon"),i(12,"home"),e(),n(13,"div")(14,"strong"),i(15,"Logradouro:"),e(),n(16,"span"),i(17),e()()(),n(18,"div",19)(19,"mat-icon"),i(20,"location_city"),e(),n(21,"div")(22,"strong"),i(23,"Bairro:"),e(),n(24,"span"),i(25),e()()(),n(26,"div",19)(27,"mat-icon"),i(28,"place"),e(),n(29,"div")(30,"strong"),i(31,"Cidade:"),e(),n(32,"span"),i(33),e()()(),p(34,gt,8,2,"div",20),e()()()),o&2){let t=d();c(7),C("CEP: ",t.formatCep(t.cepData.cep),""),c(10),h(t.cepData.street||"N\xE3o informado"),c(8),h(t.cepData.neighborhood||"N\xE3o informado"),c(8),O("",t.cepData.city," - ",t.cepData.state,""),c(),s("ngIf",(t.cepData.location==null||t.cepData.location.coordinates==null?null:t.cepData.location.coordinates.latitude)&&(t.cepData.location==null||t.cepData.location.coordinates==null?null:t.cepData.location.coordinates.longitude))}}function ut(o,l){if(o&1){let t=P();n(0,"div",25),g("click",function(){let a=f(t).$implicit,m=d(2);return M(m.searchFromHistory(a.cep))}),n(1,"div",26)(2,"strong"),i(3),e(),n(4,"span"),i(5),e()(),n(6,"mat-icon",27),i(7,"search"),e()()}if(o&2){let t=l.$implicit,r=d(2);c(3),h(r.formatCep(t.cep)),c(2),v("",t.street,", ",t.city," - ",t.state,"")}}function ht(o,l){if(o&1){let t=P();n(0,"mat-card",21)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),i(4,"history"),e(),i(5," Hist\xF3rico de Buscas "),e(),n(6,"mat-card-subtitle"),i(7),e()(),n(8,"mat-card-content")(9,"div",22),p(10,ut,8,4,"div",23),e()(),n(11,"mat-card-actions")(12,"button",24),g("click",function(){f(t);let a=d();return M(a.clearHistory())}),n(13,"mat-icon"),i(14,"delete"),e(),i(15," Limpar Hist\xF3rico "),e()()()}if(o&2){let t=d();c(7),C("\xDAltimas ",t.searchHistory.length," consultas realizadas"),c(3),s("ngForOf",t.searchHistory)}}var Nt=(()=>{class o{constructor(t,r,a){this.fb=t,this.cepService=r,this.snackBar=a,this.cepData=null,this.isLoading=!1,this.error="",this.searchHistory=[],this.cepForm=this.fb.group({cep:["",[y.required,y.pattern(/^\d{5}-?\d{3}$/)]]})}ngOnInit(){this.loadSearchHistory()}onSearch(){if(this.cepForm.valid){let t=this.cepForm.get("cep")?.value;this.searchCep(t)}else this.snackBar.open("Por favor, digite um CEP v\xE1lido (formato: 00000-000)","Fechar",{duration:3e3})}searchCep(t){this.isLoading=!0,this.error="",this.cepData=null,this.cepService.getCepData(t).subscribe({next:r=>{this.cepData=r,this.isLoading=!1,this.addToHistory(r),this.snackBar.open("CEP encontrado com sucesso!","Fechar",{duration:2e3})},error:r=>{this.error=r.message,this.isLoading=!1,this.snackBar.open(r.message,"Fechar",{duration:4e3})}})}formatCep(t){return t.replace(/\D/g,"").replace(/^(\d{5})(\d{3})$/,"$1-$2")}onCepInput(t){let r=t.target.value.replace(/\D/g,"");r.length>5&&(r=r.replace(/^(\d{5})(\d{0,3})$/,"$1-$2")),this.cepForm.get("cep")?.setValue(r)}clearForm(){this.cepForm.reset(),this.cepData=null,this.error=""}searchFromHistory(t){this.cepForm.get("cep")?.setValue(this.formatCep(t)),this.searchCep(t)}addToHistory(t){this.searchHistory=this.searchHistory.filter(r=>r.cep!==t.cep),this.searchHistory.unshift(t),this.searchHistory.length>5&&(this.searchHistory=this.searchHistory.slice(0,5)),localStorage.setItem("cep-history",JSON.stringify(this.searchHistory))}loadSearchHistory(){let t=localStorage.getItem("cep-history");t&&(this.searchHistory=JSON.parse(t))}clearHistory(){this.searchHistory=[],localStorage.removeItem("cep-history"),this.snackBar.open("Hist\xF3rico limpo com sucesso!","Fechar",{duration:2e3})}static{this.\u0275fac=function(r){return new(r||o)(u(X),u(G),u(rt))}}static{this.\u0275cmp=x({type:o,selectors:[["app-cep-search"]],standalone:!0,features:[E],decls:34,vars:11,consts:[[1,"cep-search-container"],[1,"header-section"],[1,"search-card"],[1,"search-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"cep-input"],["matInput","","formControlName","cep","placeholder","00000-000","maxlength","9",3,"input"],["matSuffix",""],[4,"ngIf"],[1,"button-group"],["mat-raised-button","","color","primary","type","submit",1,"search-button",3,"disabled"],["mat-button","","type","button",3,"click","disabled"],["class","loading-section",4,"ngIf"],["class","result-card",4,"ngIf"],["class","history-card",4,"ngIf"],[1,"loading-section"],["mode","indeterminate","diameter","50"],[1,"result-card"],[1,"success-icon"],[1,"address-details"],[1,"detail-item"],["class","detail-item",4,"ngIf"],[1,"history-card"],[1,"history-list"],["class","history-item",3,"click",4,"ngFor","ngForOf"],["mat-button","",3,"click"],[1,"history-item",3,"click"],[1,"history-info"],[1,"history-action"]],template:function(r,a){if(r&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),i(3,"\u{1F4CD} Consulta CEP"),e(),n(4,"p"),i(5,"Busque endere\xE7os completos atrav\xE9s do CEP usando a Brasil API"),e()(),n(6,"mat-card",2)(7,"mat-card-header")(8,"mat-card-title"),i(9,"Buscar CEP"),e(),n(10,"mat-card-subtitle"),i(11,"Digite o CEP no formato 00000-000"),e()(),n(12,"mat-card-content")(13,"form",3),g("ngSubmit",function(){return a.onSearch()}),n(14,"mat-form-field",4)(15,"mat-label"),i(16,"CEP"),e(),n(17,"input",5),g("input",function(_){return a.onCepInput(_)}),e(),n(18,"mat-icon",6),i(19,"location_on"),e(),p(20,st,2,0,"mat-error",7)(21,lt,2,0,"mat-error",7),e(),n(22,"div",8)(23,"button",9),p(24,mt,2,0,"mat-icon",7)(25,dt,2,0,"mat-icon",7),i(26),e(),n(27,"button",10),g("click",function(){return a.clearForm()}),n(28,"mat-icon"),i(29,"clear"),e(),i(30," Limpar "),e()()()()(),p(31,pt,4,0,"div",11)(32,_t,35,6,"mat-card",12)(33,ht,16,2,"mat-card",13),e()),r&2){let m,_;c(13),s("formGroup",a.cepForm),c(7),s("ngIf",(m=a.cepForm.get("cep"))==null?null:m.hasError("required")),c(),s("ngIf",(_=a.cepForm.get("cep"))==null?null:_.hasError("pattern")),c(2),s("disabled",a.isLoading||a.cepForm.invalid),c(),s("ngIf",a.isLoading),c(),s("ngIf",!a.isLoading),c(),C(" ",a.isLoading?"Buscando...":"Buscar"," "),c(),s("disabled",a.isLoading),c(4),s("ngIf",a.isLoading),c(),s("ngIf",a.cepData&&!a.isLoading),c(),s("ngIf",a.searchHistory.length>0)}},dependencies:[D,b,I,Y,K,q,J,R,W,Q,U,L,F,B,k,T,w,H,ot,it,nt,Z,tt,et,V,N,j,A,at,$,z,ct],styles:[".cep-search-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#003d7a;font-size:2.2rem;margin:0 0 .5rem;font-weight:600}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1rem;margin:0}.search-card[_ngcontent-%COMP%], .result-card[_ngcontent-%COMP%], .history-card[_ngcontent-%COMP%]{margin-bottom:1.5rem;box-shadow:0 2px 8px #0000001a;border-radius:8px}.search-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%], .result-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%], .history-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#003d7a;font-size:1.3rem}.search-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%], .result-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%], .history-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#666;margin-top:.25rem}.search-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.search-form[_ngcontent-%COMP%]   .cep-input[_ngcontent-%COMP%]{width:100%}.search-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.search-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]{min-width:140px}@media (max-width: 480px){.search-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{flex-direction:column}.search-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.loading-section[_ngcontent-%COMP%]{text-align:center;padding:2rem}.loading-section[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin:0 auto 1rem}.loading-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1rem;margin:0}.result-card[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{color:#27ae60}.result-card[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.result-card[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem}.result-card[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#003d7a;margin-top:2px}.result-card[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.result-card[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:#003d7a;font-size:.9rem}.result-card[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-size:1rem}.history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;border:1px solid #e0e0e0;border-radius:4px;cursor:pointer;transition:all .2s ease}.history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-color:#003d7a}.history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#003d7a;font-size:1rem}.history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:.875rem}.history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-action[_ngcontent-%COMP%]{color:#003d7a;opacity:.6;transition:opacity .2s ease}.history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]:hover   .history-action[_ngcontent-%COMP%]{opacity:1}  .mat-mdc-form-field.mat-form-field-invalid .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{color:#e74c3c}@media (max-width: 768px){.cep-search-container[_ngcontent-%COMP%]{padding:15px}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.result-card[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{gap:.75rem}.history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-action[_ngcontent-%COMP%]{align-self:flex-end}}"]})}}return o})();export{Nt as CepSearchComponent};
